<!DOCTYPE html> 
<html lang="pt-br">
<head>
  <meta charset="UTF-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>INTERNET</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='estrela.png') }}">

</head>

<body class="home">

  <!-- TÃ­tulo do site -->
  <header class="title">
    <h1>WELCOME TO THE INTERNET</h1>
  </header>

  <!-- CD Player no canto -->
  <img src="{{ url_for('static', filename='cd_player.jpg') }}" alt="CD Player" class="cd player">

  <!-- Barra de busca -->
  <main class="search bar">
    <form action="{{ url_for('results') }}" method="get" class="search-bar">
      <div class="search bar">
        <input 
          id="search-input" 
          type="text" 
          name="q" 
          placeholder="SEARCH FOR THE KNOWLEDGE"
          required>
      </div>
      <div class="search-action">
        <button type="submit" id="search-btn" class="big-search">SEARCH</button>
      </div>
    </form>
  </main>
<!-- MÃºsica de fundo -->
<audio id="bg-music" autoplay loop>
  <source src="{{ url_for('static', filename='aquatic_ambience.mp3') }}" type="audio/mpeg">
</audio>

<!-- BotÃ£o para silenciar -->
<div class="music-toggle-wrapper">
  <button id="music-toggle" class="music-toggle" aria-pressed="true" title="Silenciar mÃºsica">ðŸ”Š Stop music</button>
</div>

<script>
  (function () {
    const audio = document.getElementById('bg-music');
    const btn   = document.getElementById('music-toggle');

    // volume inicial confortÃ¡vel
    audio.volume = 0.35;

    // tenta iniciar o som automaticamente
    audio.play().catch(() => {
      // se o navegador bloquear o autoplay, mostra o botÃ£o pra ativar
      console.log('Autoplay bloqueado â€” o usuÃ¡rio precisa clicar para ativar o som.');
      setButtonState(false);
    });

    btn.addEventListener('click', async () => {
      // alterna entre tocar e pausar
      if (audio.paused) {
        try {
          await audio.play();
          setButtonState(true);
        } catch (e) {
          console.log('Falha ao tocar Ã¡udio:', e);
        }
      } else {
        audio.pause();
        setButtonState(false);
      }
    });

    function setButtonState(playing) {
      if (playing) {
        btn.textContent = 'ðŸ”Š Stop music';
        btn.setAttribute('aria-pressed', 'true');
      } else {
        btn.textContent = 'ðŸ”ˆ Play music';
        btn.setAttribute('aria-pressed', 'false');
      }
    }
  })();
</script>

</body>
</html>
